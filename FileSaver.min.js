/*! FileSaver.js
 *  A saveAs() FileSaver implementation.
 *  2014-01-24
 *
 *  By Eli Grey, http://eligrey.com
 *  License: X11/MIT
 *    See LICENSE.md
 */
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/main/FileSaver.js */
var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=t.URL||t.webkitURL||t,o=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r=!t.externalHost&&"download"in o,i=t.webkitRequestFileSystem,a=t.requestFileSystem||i||t.mozRequestFileSystem,c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},s=0,u=[],d=function(){for(var t=u.length;t--;){var e=u[t];"string"==typeof e?n.revokeObjectURL(e):e.remove()}u.length=0},f=function(t,e,n){for(var o=(e=[].concat(e)).length;o--;){var r=t["on"+e[o]];if("function"==typeof r)try{r.call(t,n||t)}catch(t){c(t)}}},l=function(n,c){var d,l,w,v=this,p=n.type,m=!1,y=function(){var e=(t.URL||t.webkitURL||t).createObjectURL(n);return u.push(e),e},h=function(){f(v,"writestart progress write writeend".split(" "))},E=function(){!m&&d||(d=y()),l?l.location.href=d:window.open(d,"_blank"),v.readyState=v.DONE,h()},g=function(t){return function(){if(v.readyState!==v.DONE)return t.apply(this,arguments)}},R={create:!0,exclusive:!1};if(v.readyState=v.INIT,c||(c="download"),r){d=y(),e=t.document,(o=e.createElementNS("http://www.w3.org/1999/xhtml","a")).href=d,o.download=c;var S=e.createEvent("MouseEvents");return S.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(S),v.readyState=v.DONE,void h()}t.chrome&&p&&"application/octet-stream"!==p&&(w=n.slice||n.webkitSlice,n=w.call(n,0,n.size,"application/octet-stream"),m=!0),i&&"download"!==c&&(c+=".download"),("application/octet-stream"===p||i)&&(l=t),a?(s+=n.size,a(t.TEMPORARY,s,g(function(t){t.root.getDirectory("saved",R,g(function(t){var e=function(){t.getFile(c,R,g(function(t){t.createWriter(g(function(e){e.onwriteend=function(e){l.location.href=t.toURL(),u.push(t),v.readyState=v.DONE,f(v,"writeend",e)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&E()},"writestart progress write abort".split(" ").forEach(function(t){e["on"+t]=v["on"+t]}),e.write(n),v.abort=function(){e.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),E)}),E)};t.getFile(c,{create:!1},g(function(t){t.remove(),e()}),g(function(t){t.code===t.NOT_FOUND_ERR?e():E()}))}),E)}),E)):E()},w=l.prototype,v=function(t,e){return new l(t,e)};return w.abort=function(){this.readyState=this.DONE,f(this,"abort")},w.readyState=w.INIT=0,w.WRITING=1,w.DONE=2,w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null,t.addEventListener("unload",d,!1),v.unload=function(){d(),t.removeEventListener("unload",d,!1)},v}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&(module.exports=saveAs);